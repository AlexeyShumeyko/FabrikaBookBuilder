<Window x:Class="PhotoBookRenamer.Presentation.Views.UpdateDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Обновление доступно"
        Width="500"
        Height="400"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow"
        Background="#F5F5F5">
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Заголовок -->
        <TextBlock Grid.Row="0"
                   Text="Доступно новое обновление!"
                   FontSize="20"
                   FontWeight="Bold"
                   Foreground="#6750A4"
                   Margin="0,0,0,16"/>
        
        <!-- Информация о версии -->
        <StackPanel Grid.Row="1" Margin="0,0,0,16">
            <TextBlock Text="{Binding CurrentVersionText}"
                       FontSize="14"
                       Margin="0,0,0,8"/>
            <TextBlock Text="{Binding LatestVersionText}"
                       FontSize="14"
                       FontWeight="Bold"
                       Foreground="#6750A4"
                       Margin="0,0,0,16"/>
            
            <!-- Release Notes -->
            <TextBlock Text="Что нового:"
                       FontSize="14"
                       FontWeight="SemiBold"
                       Margin="0,0,0,8"/>
            <ScrollViewer MaxHeight="150"
                          VerticalScrollBarVisibility="Auto"
                          BorderBrush="#E0E0E0"
                          BorderThickness="1"
                          Background="White"
                          Padding="12">
                <TextBlock Text="{Binding ReleaseNotes}"
                           TextWrapping="Wrap"
                           FontSize="12"
                           LineHeight="18"/>
            </ScrollViewer>
        </StackPanel>
        
        <!-- Прогресс загрузки -->
        <StackPanel Grid.Row="2" 
                    Visibility="{Binding IsDownloading, Converter={StaticResource BooleanToVisibilityConverter}}"
                    Margin="0,0,0,16">
            <TextBlock Text="Загрузка обновления..."
                       FontSize="12"
                       Margin="0,0,0,8"/>
            <ProgressBar Value="{Binding DownloadProgress}"
                        Maximum="100"
                        Height="20"
                        Margin="0,0,0,8"/>
            <TextBlock Text="{Binding DownloadProgressText}"
                       FontSize="11"
                       Foreground="#666"
                       HorizontalAlignment="Center"/>
        </StackPanel>
        
        <!-- Кнопки -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="Отложить"
                    Command="{Binding PostponeCommand}"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Margin="0,0,12,0"
                    Padding="24,8"
                    MinWidth="100"
                    Visibility="{Binding IsDownloading, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
            <Button Content="Обновить"
                    Command="{Binding UpdateCommand}"
                    Style="{StaticResource PrimaryButtonStyle}"
                    Padding="24,8"
                    MinWidth="100"
                    IsEnabled="{Binding CanUpdate}"
                    Visibility="{Binding IsDownloading, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
        </StackPanel>
    </Grid>
</Window>


